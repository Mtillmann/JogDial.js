!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).JogDial=e()}(this,(function(){"use strict";return class{toRad=Math.PI/180;toDeg=180/Math.PI;quadrant={current:1,previous:1};rotation={current:0,previous:0};pressed=!1;mobileEvent="ontouchstart"in window&&window.navigator.userAgent.match(/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/);pointerEvent=!(!window.navigator.pointerEnabled&&!window.navigator.msPointerEnabled);defaults={touchMode:"knob",knobSize:"30%",wheelSize:"100%",zIndex:9999,degreeStartAt:0,minDegree:null,maxDegree:null};domEvent={MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_UP:"mouseup"};customEvent={MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup"};getCoordinates(t){const e=t.target.getBoundingClientRect();return{x:(this.mobileEvent?t.targetTouches[0].clientX:t.clientX)-e.left,y:(this.mobileEvent?t.targetTouches[0].clientY:t.clientY)-e.top}}getQuadrant(t,e){return t>0&&e>0?4:t<0&&e>0?3:t<0&&e<0?2:t>=0&&e<0?1:void 0}getRotation(t,e){let s,i=0;return 1===t&&2===this.quadrant.previous?i=360:2===t&&1===this.quadrant.previous&&(i=-360),s=e+i-this.rotation.previous+this.rotation.current,this.rotation.previous=e,this.quadrant.previous=t,s}checkBoxCollision(t,e){return t.x1<e.x&&t.x2>e.x&&t.y1<e.y&&t.y2>e.y}addEvent(t,e,s,i){e.split(" ").forEach((e=>t.addEventListener(e,s,i)))}convertClockToUnit(t){return t%360-90}convertUnitToClock(t){return t>=-180&&t<-90?450+t:90+t}constructor(t,e){if(t.dataset.isAttachedToJogDialInstance)return console.error("Please Check your code: JogDial can not be initialized twice in a same element."),!1;this.element=t,this.element.dataset.isAttachedToJogDialInstance=!0,this.options={...this.defaults,...e},this.setupDOM(),this.setupEvents(),this.angleTo(this.convertClockToUnit(this.options.degreeStartAt))}set(t){const e=this.options.maxDegree||360,s=t>e?e:t;this.angleTo(this.convertClockToUnit(s),s)}setupDOM(){this.knob=document.createElement("div"),this.wheel=document.createElement("div"),this.knob.classList.add("knob"),this.wheel.classList.add("wheel"),"static"===window.getComputedStyle(this.element).getPropertyValue("position")&&this.element.style.setProperty("position","relative"),this.element.appendChild(this.knob),this.element.appendChild(this.wheel),this.knob.style.setProperty("position","absolute"),this.knob.style.setProperty("width",this.options.knobSize),this.knob.style.setProperty("height",this.options.knobSize),this.wheel.style.setProperty("position","absolute"),this.wheel.style.setProperty("width",this.options.wheelSize),this.wheel.style.setProperty("height",this.options.wheelSize);const t=this.knob.clientWidth/2,e=this.wheel.clientWidth/2;this.knob.style.setProperty("margin",-t+"px 0 0 "+-t+"px"),this.knob.style.setProperty("z-index",this.options.zIndex);const s=(this.element.clientWidth-this.wheel.clientWidth)/2,i=(this.element.clientHeight-this.wheel.clientHeight)/2;this.wheel.style.setProperty("left",0),this.wheel.style.setProperty("top",0),this.wheel.style.setProperty("margin",i+"px 0 0 "+s+"px"),this.wheel.style.setProperty("z-index",this.options.zIndex),this.radius=e-t,this.center={x:e+s,y:e+i},this.options.debug&&(this.knob.style.setProperty("background-color","#0000FF"),this.knob.style.setProperty("opacity","0.4"),this.knob.style.setProperty("border-radius","50%"),this.wheel.style.setProperty("border-radius","50%"),this.wheel.style.setProperty("background-color","#00FF00"),this.wheel.style.setProperty("opacity","0.4"))}setupEvents(){this.mobileEvent&&(this.domEvent={...this.domEvent,MOUSE_DOWN:"touchstart",MOUSE_MOVE:"touchmove",MOUSE_OUT:"touchleave",MOUSE_UP:"touchend"});const t=t=>{if(this.pressed){t.preventDefault?t.preventDefault():t.returnValue=!1;const e=this.getCoordinates(t),s=e.x-this.center.x+this.wheel.offsetLeft,i=e.y-this.center.y+this.wheel.offsetTop;let o=Math.atan2(i,s)*this.toDeg,n=this.getQuadrant(s,i),h=this.convertUnitToClock(o);this.rotation.current=this.getRotation(void 0===n?this.quadrant.previous:n,h);let r=this.rotation.current;null!=this.options.maxDegree&&this.options.maxDegree<=r?(r=this.options.maxDegree,o=this.convertClockToUnit(r),h=this.convertUnitToClock(o)):null!==this.options.minDegree&&this.options.minDegree>=r&&(r=this.options.minDegree,o=this.convertClockToUnit(r),h=this.convertUnitToClock(o)),this.element.dataset.rotation=r,this.element.style.setProperty("--rotation",r+"deg"),this.element.dataset.degree=h,this.element.style.setProperty("--degree",h+"deg"),this.angleTo(o)}},e=()=>{this.pressed&&(this.pressed=!1,this.element.dispatchEvent(new CustomEvent("jogdial.end",{detail:this.element.dataset})))};this.addEvent(this.wheel,this.domEvent.MOUSE_DOWN,(e=>{switch(this.options.touchMode){case"knob":default:this.pressed=this.checkBoxCollision({x1:this.knob.offsetLeft-this.wheel.offsetLeft,y1:this.knob.offsetTop-this.wheel.offsetTop,x2:this.knob.offsetLeft-this.wheel.offsetLeft+this.knob.clientWidth,y2:this.knob.offsetTop-this.wheel.offsetTop+this.knob.clientHeight},this.getCoordinates(e));break;case"wheel":this.pressed=!0,t(e)}this.pressed&&this.element.dispatchEvent(new CustomEvent("jogdial.start",{detail:this.element.dataset}))}),!1),this.addEvent(this.wheel,this.domEvent.MOUSE_MOVE,t,!1),this.addEvent(this.wheel,this.domEvent.MOUSE_UP,e,!1),this.addEvent(this.wheel,this.domEvent.MOUSE_OUT,e,!1)}angleTo(t,e=!1){t*=this.toRad;const s=Math.cos(t)*this.radius+this.center.x,i=Math.sin(t)*this.radius+this.center.y,o=this.getQuadrant(s,i);this.knob.style.setProperty("left",s+"px"),this.knob.style.setProperty("top",i+"px"),void 0===!this.element.dataset.rotation&&(this.element.dataset.rotation=this.options.degreeStartAt,this.element.style.setProperty("--rotation",this.options.degreeStartAt+"deg"),this.element.dataset.degree=this.convertUnitToClock(t),this.element.style.setProperty("--degree",this.convertUnitToClock(t)+"deg")),e&&(this.quadrant.current=o,this.quadrant.previous=o,this.rotation.current=e,this.rotation.previous=e%360,this.element.dataset.rotation=e,this.element.style.setProperty("--rotation",e+"deg"),this.element.dataset.degree=e%360,this.element.style.setProperty("--degree",e%360+"deg")),this.element.dispatchEvent(new CustomEvent("jogdial.update",{detail:this.element.dataset}))}}}));