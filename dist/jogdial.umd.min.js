!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).JogDial=e()}(this,(function(){"use strict";return class{quadrant={current:1,previous:1};rotation={current:0,previous:0};pressed=!1;mobileEvent="ontouchstart"in window&&window.navigator.userAgent.match(/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/);pointerEvent=!(!window.navigator.pointerEnabled&&!window.navigator.msPointerEnabled);defaults={touchMode:"knob",degreeStartAt:0,minDegree:null,maxDegree:null};domEvent={MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_UP:"mouseup"};customEvent={MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup"};getCoordinates(t){const e=t.target.getBoundingClientRect();return{x:(this.mobileEvent?t.targetTouches[0].clientX:t.clientX)-e.left,y:(this.mobileEvent?t.targetTouches[0].clientY:t.clientY)-e.top}}getQuadrant(t,e){return t>0&&e>0?4:t<0&&e>0?3:t<0&&e<0?2:t>=0&&e<0?1:void 0}getRotation(t,e){let i,s=0;return 1===t&&2===this.quadrant.previous?s=360:2===t&&1===this.quadrant.previous&&(s=-360),i=e+s-this.rotation.previous+this.rotation.current,this.rotation.previous=e,this.quadrant.previous=t,i}checkBoxCollision(t,e){return t.x1<e.x&&t.x2>e.x&&t.y1<e.y&&t.y2>e.y}addEvent(t,e,i,s){e.split(" ").forEach((e=>t.addEventListener(e,i,s)))}convertClockToUnit(t){return t%360-90}convertUnitToClock(t){return t>=-180&&t<-90?450+t:90+t}constructor(t,e){if(t.dataset.jogdialIsAttached)return console.error("Please Check your code: JogDial can not be initialized twice in a same element."),!1;this.element=t,this.element.dataset.jogdialIsAttached="true",this.options={...this.defaults,...e},this.setupDOM(),this.setupEvents(),this.angleTo(this.convertClockToUnit(this.options.degreeStartAt))}set(t){const e=this.options.maxDegree||360,i=t>e?e:t;this.angleTo(this.convertClockToUnit(i),i)}setupDOM(){this.knob=document.createElement("div"),this.wheel=document.createElement("div"),this.knob.classList.add("knob"),this.wheel.classList.add("wheel"),this.element.appendChild(this.knob),this.element.appendChild(this.wheel);const t=this.knob.clientWidth/2,e=this.wheel.clientWidth/2;this.knob.style.setProperty("margin",-t+"px 0 0 "+-t+"px");const i=(this.element.clientWidth-this.wheel.clientWidth)/2,s=(this.element.clientHeight-this.wheel.clientHeight)/2;this.wheel.style.setProperty("margin",s+"px 0 0 "+i+"px"),this.radius=e-t,this.center={x:e+i,y:e+s},this.options.debug&&(this.element.dataset.jogdialDebug="true")}setupEvents(){this.mobileEvent&&(this.domEvent={...this.domEvent,MOUSE_DOWN:"touchstart",MOUSE_MOVE:"touchmove",MOUSE_OUT:"touchleave",MOUSE_UP:"touchend"});const t=t=>{if(this.pressed){t.preventDefault?t.preventDefault():t.returnValue=!1;const e=this.getCoordinates(t),i=e.x-this.center.x+this.wheel.offsetLeft,s=e.y-this.center.y+this.wheel.offsetTop;let o=Math.atan2(s,i)*(180/Math.PI),n=this.getQuadrant(i,s),h=this.convertUnitToClock(o);this.rotation.current=this.getRotation(void 0===n?this.quadrant.previous:n,h);let r=this.rotation.current;null!=this.options.maxDegree&&this.options.maxDegree<=r?(r=this.options.maxDegree,o=this.convertClockToUnit(r),h=this.convertUnitToClock(o)):null!==this.options.minDegree&&this.options.minDegree>=r&&(r=this.options.minDegree,o=this.convertClockToUnit(r),h=this.convertUnitToClock(o)),this.setAttributes(r,h),this.angleTo(o)}},e=()=>{this.pressed&&(this.pressed=!1,this.element.dispatchEvent(new CustomEvent("jogdial.end",{detail:this.element.dataset})))};this.addEvent(this.wheel,this.domEvent.MOUSE_DOWN,(e=>{switch(this.options.touchMode){case"knob":default:this.pressed=this.checkBoxCollision({x1:this.knob.offsetLeft-this.wheel.offsetLeft,y1:this.knob.offsetTop-this.wheel.offsetTop,x2:this.knob.offsetLeft-this.wheel.offsetLeft+this.knob.clientWidth,y2:this.knob.offsetTop-this.wheel.offsetTop+this.knob.clientHeight},this.getCoordinates(e));break;case"wheel":this.pressed=!0,t(e)}this.pressed&&this.element.dispatchEvent(new CustomEvent("jogdial.start",{detail:this.element.dataset}))}),!1),this.addEvent(this.wheel,this.domEvent.MOUSE_MOVE,t,!1),this.addEvent(this.wheel,this.domEvent.MOUSE_UP,e,!1),this.addEvent(this.wheel,this.domEvent.MOUSE_OUT,e,!1)}angleTo(t,e=!1){t*=Math.PI/180;const i=Math.cos(t)*this.radius+this.center.x,s=Math.sin(t)*this.radius+this.center.y,o=this.getQuadrant(i,s);this.knob.style.setProperty("left",i+"px"),this.knob.style.setProperty("top",s+"px"),void 0===!this.element.dataset.rotation&&this.setAttributes(this.options.degreeStartAt,this.convertUnitToClock(t)),e&&(this.quadrant.current=o,this.quadrant.previous=o,this.rotation.current=e,this.rotation.previous=e%360,this.setAttributes(e,e%360)),this.element.dispatchEvent(new CustomEvent("jogdial.update",{detail:this.element.dataset}))}setAttributes(t,e){this.element.dataset.rotation=t,this.element.style.setProperty("--rotation",t+"deg"),this.element.dataset.degree=e,this.element.style.setProperty("--degree",e+"deg"),console.log(e,this.options.maxDegree)}}}));